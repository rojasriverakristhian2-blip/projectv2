<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<link rel="stylesheet" href="lista-asistencias.css" />

<div class="container mt-3">
    <h4 class="mb-3 text-center">Lista de Asistencias - Reunión #{{ reunion.reunionID }}</h4>
    
    <div class="card mb-3">
        <div class="card-body">
            <p><strong>Lugar:</strong> {{ reunion.reunionLugar }}</p>
            <p><strong>Descripción:</strong> {{ reunion.reunionDescripcion }}</p>
        </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
            <button class="nav-link" [class.active]="activeTab === 'confirmados'" 
                    (click)="cambiarTab('confirmados')">
                Confirmados ({{ usuariosConfirmados.length }})
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" [class.active]="activeTab === 'noConfirmados'" 
                    (click)="cambiarTab('noConfirmados')">
                No Confirmados ({{ usuariosNoConfirmados.length }})
            </button>
        </li>
    </ul>

    <!-- Contenido de tabs -->
    <div *ngIf="loading" class="text-center">
        <p>Cargando...</p>
    </div>

    <div *ngIf="!loading">
        <!-- Tab Confirmados -->
        <div *ngIf="activeTab === 'confirmados'">
            <div *ngIf="usuariosConfirmados.length === 0" class="alert alert-info">
                No hay residentes que hayan confirmado asistencia todavía.
            </div>
            <div *ngIf="usuariosConfirmados.length > 0" class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Cédula</th>
                            <th>Nombre</th>
                            <th>Correo</th>
                            <th>Teléfono</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let usuario of usuariosConfirmados">
                            <td>{{ usuario.cedula }}</td>
                            <td>{{ usuario.nombre }}</td>
                            <td>{{ usuario.correo }}</td>
                            <td>{{ usuario.telefono }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Tab No Confirmados -->
        <div *ngIf="activeTab === 'noConfirmados'">
            <div *ngIf="usuariosNoConfirmados.length === 0" class="alert alert-info">
                Todos los residentes han confirmado su asistencia.
            </div>
            <div *ngIf="usuariosNoConfirmados.length > 0" class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Cédula</th>
                            <th>Nombre</th>
                            <th>Correo</th>
                            <th>Teléfono</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let usuario of usuariosNoConfirmados">
                            <td>{{ usuario.cedula }}</td>
                            <td>{{ usuario.nombre }}</td>
                            <td>{{ usuario.correo }}</td>
                            <td>{{ usuario.telefono }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="text-center mt-3">
        <button class="btn btn-secondary" (click)="cerrar()">Cerrar</button>
    </div>
</div>

